# Textualåº“æŒ‡å—1:å¼€å‘å·¥å…·(Devtools)

æ­¤æ•™ç¨‹ç¿»è¯‘è‡ª[Textualå®˜æ–¹æŒ‡å—](https://textual.textualize.io/guide/devtools/#console)

Textualçš„å‘½ä»¤è¡ŒæŒ‡ä»¤å’Œtexualåå­—ä¸€æ ·ã€‚`textual`æŒ‡ä»¤åœ¨ä½ å¼€å‘å·¥å…·æ—¶éžå¸¸å¥½ç”¨ã€‚

éº»çƒ¦æ‚¨èŠ±ä¸€äº›æ—¶é—´æŸ¥çœ‹textualå¯ç”¨çš„å­—å‘½ä»¤ï¼Œå®ƒåœ¨ä¹‹åŽä¼šå¾ˆæœ‰ç”¨çš„ã€‚

```
textual --help
```

## è¿è¡Œ

`run`æŒ‡ä»¤å¯ä»¥è¿è¡Œtextualåº”ç”¨ï¼Œæä¾›ä¸€ä¸ªpythonæ–‡ä»¶è·¯å¾„å®ƒå°±ä¼šæ‰§è¡Œè¯¥åº”ç”¨

```
textual run my_app.py
```

ä¸Šè¿°å‘½ä»¤ç­‰åŒäºŽç›´æŽ¥æ‰§è¡Œmy_app.pyï¼Œä¸è¿‡åœ¨ç”¨å‘½ä»¤è¿è¡Œæ—¶å¯ä»¥å¼€å¯æˆ–å…³é—­ä¸€äº›åŠŸèƒ½æ¥debugä½ çš„ç¨‹åºï¼Œæ¯”å¦‚`--dev`å¯ä»¥æ¿€æ´»æŽ§åˆ¶å°

å¯ä»¥é€šè¿‡`run`æŒ‡ä»¤çš„`help`æ¥æŸ¥çœ‹å…·ä½“ç»†èŠ‚

```
textual run --help
```

ä½ å¯ä»¥é€šè¿‡python importæ¥è¿è¡ŒTextualåº”ç”¨ï¼Œä¸‹è¿°å‘½ä»¤å¯ä»¥å¯¼å…¥`music.play`å¹¶ç”¨Textualæ¨¡å—è¿è¡Œï¼š

```
textual run music.play
```

å‡è®¾`music.play`ä¸­æœ‰ä¸€ä¸ªTextual appå®žä¾‹ï¼Œå¦‚æžœè¯¥appæœ‰äº†ä¸åŒçš„åå­—ï¼Œæ‚¨å¯ä»¥å°†å…¶æ·»åŠ åœ¨å†’å·ä¹‹åŽï¼š

```
textual run music.play:MusicPlayerApp
```

## é€šè¿‡å‘½ä»¤è¿è¡Œ

å¦‚æžœæ‚¨æ˜¯é€šè¿‡å‘½ä»¤è¡Œè„šæœ¬å®‰è£…çš„appï¼Œæ‚¨å¯ä»¥é€šè¿‡`-c`è¿è¡Œå®ƒã€‚ä¾‹å¦‚ä»¥ä¸‹æŒ‡ä»¤å°†ä¼šè¿è¡Œtextual colorså‘½ä»¤ï¼š

```
textual run -c textual colors
```

## æœåŠ¡ç«¯

è¯¥å·¥å…·è¿˜äºˆè®¸æ‚¨åœ¨æµè§ˆå™¨ä¸ŠæœåŠ¡æ‚¨çš„åº”ç”¨ã€‚å¯ä»¥å¾ˆé«˜æ•ˆåœ°å°†ç»ˆç«¯appè½¬æ¢ä¸ºç½‘é¡µåº”ç”¨ï¼

æœåŠ¡ç«¯å‘½ä»¤å’Œä¸Šè¯‰â€œè¿è¡Œâ€ä¸­çš„å¾ˆç±»ä¼¼ï¼Œä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨ç«¯ä¸Šé€šè¿‡pythonæ–‡ä»¶å¯åŠ¨ä¸€ä¸ªappï¼š

```
textual serve my_app.py
```

æ‚¨è¿˜å¯ä»¥é€šè¿‡å‘½ä»¤ç›´æŽ¥å¯åŠ¨Textualåº”ç”¨ï¼Œä¾‹å¦‚ï¼š

```
textual serve "textual keys"
```

é€šè¿‡æ¨¡å—å¯åŠ¨appçš„è¯­æ³•åˆ™ä¸Žè¿è¡Œå®Œå…¨ä¸åŒï¼Œä½ éœ€è¦æ˜Žç¡®æŒ‡å®šåŒ…æ‹¬pythonçš„å®Œæ•´çš„å‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯è¿è¡ŒTextualçš„ä¾‹å­ï¼š

```
textual serve "python -m textual"
```

Textualçš„å†…ç½®ç½‘é¡µæœåŠ¡å™¨æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œæ‚¨å¯ä»¥åŒæ—¶ä¸ºappçš„å¤šä¸ªå®žä¾‹æä¾›æœåŠ¡ï¼

```
æ³¨æ„âš ï¸

åœ¨å¼€å‘appæ—¶TextualæœåŠ¡ç«¯ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œæ‚¨æ›´æ”¹äº†ä»£ç ä¹‹åŽåªéœ€è¦åˆ·æ–°æµè§ˆå™¨å°±èƒ½æ›´æ–°äº†ã€‚
```

TextualæœåŠ¡ç«¯appè¿˜æœ‰ä¸€äº›é¢å¤–çš„å¼€å…³é€‰é¡¹ï¼Œæ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹æŒ‡ä»¤æ¥æŸ¥çœ‹å¼€å…³åˆ—è¡¨ï¼š

```
textual serve -h
```

## å®žæ—¶ç¼–è¾‘

å¦‚æžœæ‚¨ç”¨`--dev`æ‰§è¡Œç¨‹åºï¼Œappå°†ä¼šå·²å¼€å‘æ¨¡å¼è¿è¡Œ

```
textual run --dev my_app.py
```

å¼€å‘æ¨¡å¼åˆ°ç‰¹æ€§æ˜¯å®žæ—¶ç¼–è¾‘CSSæ–‡ä»¶ï¼Œå¯¹CSSçš„ä»»ä½•æ”¹åŠ¨éƒ½ä¼šåœ¨å‡ æ¯«ç§’å†…è¿”å›žåˆ°ç»ˆç«¯

åœ¨è¿­ä»£appçš„å¤–è§‚æ—¶è¯¥ç‰¹æ€§ç›¸å½“å¥½ç”¨ã€‚ç”¨ç¼–è¾‘å™¨æ‰“å¼€CSSå¹¶åœ¨appä¸Šè¿è¡Œä¸€ä¸ªç»ˆç«¯æ—¶ï¼Œå¯¹CSSåšå‡ºçš„ç¼–è¾‘å‡ ä¹Žä¼šåœ¨ä¿å­˜åŽç«‹é©¬å‡ºçŽ°

## æŽ§åˆ¶å°

åœ¨æž„å»ºç»ˆç«¯åº”ç”¨æ—¶ï¼Œææ— æ³•é€šè¿‡printæ¥debugï¼ˆæˆ–è€…ç™»å½•åˆ°æŽ§åˆ¶å°ï¼‰ï¼Œå› ä¸ºæ‚¨å†™å…¥è¾“å‡ºçš„ä»»ä½•å†…å®¹éƒ½ä¼šè¦†å†™åº”ç”¨é‡Œçš„å†…å®¹ã€‚Textualåˆ°è§£å†³æ–¹æ¡ˆæ˜¯ç”¨å¦ä¸€ä¸ªdebugæŽ§åˆ¶å°è®°å½•äº†è¾“å‡ºå’Œæ–°åŠ å…¥çš„å†…å®¹ä»¥ä¾¿debug

æ‚¨éœ€è¦æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œè¿åœ¨å…¶ä¸­ä¸€ä¸ªç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å†…å®¹ä»¥ä½¿ç”¨è¯¥æŽ§åˆ¶å°ï¼š

```
textual console
```

æ‚¨åº”è¯¥ä¼šçœ‹åˆ°Textualå¼€å‘å·¥å…·çš„æ¬¢è¿Žæ¶ˆæ¯ï¼š

![Welcome Message](https://github.com/yuhan2680/TextualGuide-CN/blob/main/WelcomeMessage.jpeg)

åœ¨å¦ä¸€ä¸ªæŽ§åˆ¶å°ï¼Œåœ¨`textual run`çš„`--dev`çŠ¶æ€ä¸‹è¿è¡Œä½ çš„åº”ç”¨ï¼š

```
textual run --dev my_app.py
```

æ‚¨åœ¨åº”ç”¨ä¸­printçš„å†…å®¹éƒ½ä¼šæ˜¾ç¤ºåœ¨æŽ§åˆ¶å°çª—å£ä¸Šã€‚Textualè¿˜ä¼šå°†æ—¥å¿—æ¶ˆæ¯æ˜¾ç¤ºåœ¨è¯¥çª—å£ä»¥ä¾¿æ‚¨debugæ‚¨çš„åº”ç”¨

## å¢žé•¿å†—ä½™

Textualä¼šå°†ç‰¹å®šäº‹ä»¶å†™å…¥æ—¥å¿—æ¶ˆæ¯ï¼Œæ¯”å¦‚è¯´ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’®æˆ–è€…ç‚¹å‡»ç»ˆç«¯ã€‚ä½é¿å…ç”Ÿæˆè¿‡å¤šä¿¡æ¯ï¼Œæœ‰äº›æ—¶é—´ä¼šè¢«æ ‡è®°ä¸ºâ€œå†—ä½™çš„â€è€Œä¸è¢«è®°å…¥ã€‚å¦‚æžœæ‚¨æƒ³çœ‹åˆ°è¯¥éƒ¨åˆ†æ—¥å¿—æ¶ˆæ¯ï¼Œæ‚¨å¯ä»¥æ·»åŠ `-v`å¼€å…³

```
textual console -v
```

## å‡å°‘å†—ä½™

æ—¥å¿—ä¿¡æ¯è¢«åˆ†ç±»åˆ°äº†ä¸åŒç»„é‡Œé¢ï¼Œ`-x`æ ‡è®°å¯ä»¥æŽ’é™¤ä¸€ä¸ªç»„é‡Œçš„æ‰€æœ‰ä¿¡æ¯ï¼ˆå³ä¸è®°å½•é‚£äº›ä¿¡æ¯ï¼‰ã€‚è¿™äº›ç»„åˆ†åˆ«ä¸ºï¼šEVENT, DEBUG, INFO, WARNING, ERROR, PRINT, SYSTEM, LOGGING åŠ WORKERã€‚æ¶ˆæ¯ç»„å°†åœ¨æ—¶é—´æˆ³ä¹‹åŽæ‰“å°å‡ºæ¥ã€‚

æ‚¨å¯ä»¥æŽ’é™¤æŽ‰å¤šä¸ªç»„ã€‚å¦‚æžœæ‚¨åªæƒ³ä¿ç•™warningã€errorså’ŒprintæŠ¥å‘Šçš„è¯ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```
textual console -x SYSTEM -x EVENT -x DEBUG -x INFO
```

## è‡ªå®šä¹‰ç«¯å£

æ‚¨å¯ä»¥é€šè¿‡`--port`é€‰é¡¹æ¥æŒ‡å®šæŽ§åˆ¶å°çš„è¿è¡Œç«¯å£ã€‚åœ¨æœ‰å…¶ä»–Textualè½¯ä»¶åœ¨é»˜è®¤ç«¯å£è¿è¡Œæ—¶ï¼Œè‡ªå®šä¹‰ç«¯å£å°±èƒ½æ´¾ä¸Šç”¨åœºäº†ï¼š

```
textual console --port 7342
```

ä¹‹åŽç”¨å‘½ä»¤ä¸­çš„`--port`é€‰é¡¹è®©å…¶è¿è¡Œåœ¨åŒä¸€ä¸ªç«¯å£ä¸Šï¼š

```
textual run --dev --port 7342 my_app.py
```

## Textual log

ç”¨logå‡½æ•°å¯ä»¥ç¾Žè§‚åœ°æ‰“å°æ•°æ®ç»“æž„åŠå…¶ä»–[Rich](https://rich.readthedocs.io/en/latest/)èƒ½æ˜¾ç¤ºçš„ä¸œè¥¿ã€‚

æ‚¨å¯ä»¥åƒè¿™æ ·å¯¼å…¥logå‡½æ•°ï¼š

```
from textual import log
```

ä»¥ä¸‹æ˜¯ä¸€äº›é€šè¿‡logå‘æŽ§åˆ¶å°å†™å…¥å†…å®¹çš„ç¤ºä¾‹ï¼š

```
def on_mount(self) -> None:

    log("Hello, World")  # simple string

    log(locals())  # Log local variables

    log(children=self.children, pi=3.141592)  # key/values

    log(self.tree)  # Rich renderables
```

## Log æ–¹æ³•

æœ‰ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„å¯ä»¥ç™»å½•appå’Œå°éƒ¨ä»¶å¯¹è±¡çš„å¿«æ·æ–¹æ³•ï¼Œåœ¨äº‹ä»¶å¤„ç†ç¨‹åºæ—¶å¾ˆæœ‰ç”¨ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ï¼š

```
from textual.app import App


class LogApp(App):


    def on_load(self):

        self.log("In the log handler!", pi=3.141529)


    def on_mount(self):

        self.log(self.tree)


if __name__ == "__main__":

    LogApp().run()
```

## æ—¥å¿—å¤„ç†ç¨‹åº

Textualæœ‰ä¸€ä¸ªä¼šç»ç”±å†…ç½®æ—¥å¿—åº“çš„å†…å®¹å†™å…¥devtoolsï¼ˆå¼€å‘å·¥å…·ï¼‰çš„[æ—¥å¿—å¤„ç†ç¨‹åº](https://textual.textualize.io/api/logging/#textual.logging.TextualHandler)

```
æç¤ºðŸ””

æ—¥å¿—åº“ä»…èƒ½å¤„ç†å­—ç¬¦ä¸²ï¼Œå› æ­¤æ‚¨ä¸èƒ½ç”¨æ—¥å¿—å¤„ç†ç¨‹åºè®°å½•Richæ¸²æŸ“çš„ä¸œè¥¿ï¼Œæ¯”å¦‚self.tree
```

ä»¥ä¸‹æ˜¯ä¸€ä¸ªé€šè¿‡æ—¥å¿—å¤„ç†ç¨‹åºé…ç½®æ—¥å¿—çš„ä¾‹å­ï¼š

```
import logging

from textual.app import App

from textual.logging import TextualHandler


logging.basicConfig(

    level="NOTSET",

    handlers=[TextualHandler()],

)



class LogApp(App):

    """Using logging with Textual."""


    def on_mount(self) -> None:

        logging.debug("Logged via TextualHandler")



if __name__ == "__main__":

    LogApp().run()
```
